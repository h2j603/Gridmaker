<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=1280, initial-scale=1.0">
<title>Grid Maker</title>
<style>
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f5f5; padding: 20px; }
.container { max-width: 1800px; margin: 0 auto; background: white; border-radius: 12px; padding: 30px; box-shadow: 0 2px 20px rgba(0,0,0,0.08); }
.header { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #e5e7eb; }
.header h1 { color: #111827; font-size: 2em; margin-bottom: 8px; }
.view-toggle { display: flex; gap: 8px; margin-bottom: 20px; }
.view-btn { padding: 10px 20px; border: 2px solid #e5e7eb; border-radius: 6px; background: white; cursor: pointer; font-weight: 500; transition: all 0.2s; }
.view-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
.workspace { display: grid; grid-template-columns: 320px 1fr 400px; gap: 30px; }
.panel { background: #f9fafb; border-radius: 8px; padding: 20px; }
.panel h3 { color: #111827; font-size: 0.95em; margin-bottom: 16px; font-weight: 600; }
.control-group { margin-bottom: 20px; padding-bottom: 16px; border-bottom: 1px solid #e5e7eb; }
.control-group:last-child { border-bottom: none; }
.control-label { display: block; color: #374151; font-size: 0.85em; font-weight: 500; margin-bottom: 6px; }
.control-input, .control-select { width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px; font-size: 14px; background: white; }
.input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-bottom: 8px; }
.btn { width: 100%; padding: 10px; border: none; border-radius: 6px; font-weight: 500; cursor: pointer; margin-bottom: 8px; font-size: 14px; }
.btn:disabled { background: #d1d5db; cursor: not-allowed; }
.btn-primary { background: #3b82f6; color: white; }
.btn-primary:hover:not(:disabled) { background: #2563eb; }
.btn-secondary { background: #e5e7eb; color: #374151; }
.btn-secondary:hover:not(:disabled) { background: #d1d5db; }
.btn-group { display: flex; gap: 8px; }

.canvas { 
  background: whitesmoke; border-radius: 8px; padding: 20px; min-height: 600px; 
  transition: all 0.3s;
  transform-origin: top center; /* ë°°ìœ¨ ë³€ê²½ ê¸°ì¤€ì  */
}

.canvas.mobile-view { max-width: 375px; margin: 0 auto; }
.grid-container { display: grid; gap: 10px; min-height: 500px; }
.module { background: #8c6c3c; border-radius: 0; min-height: 60px; cursor: pointer; position: relative; border: 2px solid transparent; transition: all 0.2s; overflow: hidden; }
.module:hover { border-color: #3b82f6; transform: translateY(-2px); }
.module.selected { border-color: #ef4444; border-width: 3px; }
/* --- [ì‹ ê·œ] ê·¸ë£¹í™”ëœ ëª¨ë“ˆ ìŠ¤íƒ€ì¼ --- */
.module[data-group-id] { box-shadow: 0 0 0 2px #a5b4fc inset; }
.module[data-group-id]:hover { border-color: #3b82f6; }
.module.selected[data-group-id] { border-color: #ef4444; box-shadow: 0 0 0 3px #ef4444 inset; }

.module.dragging { opacity: 0.5; }
.module.warning { border-color: #f59e0b; border-width: 2px; }
.module-info { position: absolute; top: 4px; left: 4px; background: rgba(0,0,0,0.7); color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: 600; z-index: 10; }
.module-warning { position: absolute; top: 4px; right: 28px; background: rgba(245, 158, 11, 0.9); color: white; padding: 2px 6px; border-radius: 3px; font-size: 10px; font-weight: 600; z-index: 10; }
.module-delete { position: absolute; top: 4px; right: 4px; width: 20px; height: 20px; background: rgba(239, 68, 68, 0.9); color: white; border: none; border-radius: 50%; cursor: pointer; display: none; font-size: 14px; z-index: 10; }
.module:hover .module-delete { display: block; }
.module-drag-handle { position: absolute; bottom: 4px; right: 4px; width: 24px; height: 24px; background: rgba(0,0,0,0.5); color: white; border-radius: 4px; cursor: move; display: none; justify-content: center; align-items: center; font-size: 16px; line-height: 1; padding-bottom: 2px; z-index: 10; }
.module:hover .module-drag-handle { display: flex; }

/* --- [ì‹ ê·œ] ëª¨ë“ˆ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ --- */
.module-content { padding: 30px 10px 10px; font-size: 14px; color: #333; }
.module-content.image { padding: 0; width: 100%; height: 100%; object-fit: cover; }
.module[data-type="image"] { background: #e0e0e0; }
.module[data-type="text"] { background: #ffffff; border: 1px solid #e0e0e0; }
.module[data-type="text"]:hover { border-color: #3b82f6; }

.stats { background: #eff6ff; padding: 12px; border-radius: 6px; margin-bottom: 16px; }
.stats-item { display: flex; justify-content: space-between; margin-bottom: 6px; font-size: 0.85em; }
.mode-selector { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
.mode-option { padding: 10px; border: 2px solid #e5e7eb; border-radius: 6px; cursor: pointer; transition: all 0.2s; background: white; }
.mode-option:hover { border-color: #3b82f6; }
.mode-option.selected { border-color: #3b82f6; background: #eff6ff; }
.mode-option-title { font-weight: 600; font-size: 0.9em; margin-bottom: 4px; }
.mode-option-desc { font-size: 0.75em; color: #6b7280; }
.custom-offset { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: 8px; }
.mode-hint { font-size: 0.75em; color: #6b7280; margin-top: 6px; padding: 8px; background: #f0f9ff; border-radius: 4px; }
.hint-text { font-size: 0.75em; color: #6b7280; margin-top: 4px; }
.lock-toggle { display: flex; align-items: center; gap: 8px; background: #f0f9ff; padding: 10px; border-radius: 6px; margin-top: 12px; }
.lock-toggle label { margin-bottom: 0; font-size: 0.9em; font-weight: 500; }
.code-tabs { display: flex; gap: 8px; margin-bottom: 12px; border-bottom: 2px solid #e5e7eb; }
.code-tab { padding: 8px 16px; background: transparent; border: none; color: #6b7280; cursor: pointer; font-weight: 500; border-bottom: 2px solid transparent; margin-bottom: -2px; }
.code-tab.active { color: #3b82f6; border-bottom-color: #3b82f6; }
.code-display { background: #1e293b; color: #e2e8f0; padding: 16px; border-radius: 6px; font-family: 'Courier New', monospace; font-size: 12px; line-height: 1.6; max-height: 500px; overflow-y: auto; white-space: pre; }
.toast { position: fixed; bottom: 20px; right: 20px; background: #111827; color: white; padding: 12px 20px; border-radius: 8px; z-index: 1000; }

@media (max-width: 1400px) { }

@media (max-width: 768px) {
  body { padding: 10px; }
  .container { padding: 15px; }
  .workspace { gap: 15px; }
}
</style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>ğŸ“ ê³ ê¸‰ ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ v2</h1>
    <p>ì»´í¬ë„ŒíŠ¸ + íˆìŠ¤í† ë¦¬ + ê·¸ë£¹í™” ê¸°ëŠ¥</p>
  </div>

  <div class="view-toggle">
    <button class="view-btn active" onclick="switchView('desktop')">ğŸ–¥ï¸ ë°ìŠ¤í¬í†±</button>
    <button class="view-btn" onclick="switchView('mobile')">ğŸ“± ëª¨ë°”ì¼ í”„ë¦¬ë·°</button>
  </div>

  <div class="workspace">
    <div class="panel">
      <div class="control-group">
        <h3>ğŸ“Š ë°ìŠ¤í¬í†± ì„¤ì •</h3>
        <div class="stats">
          <div class="stats-item"><span>ì»¬ëŸ¼</span><span id="stat-columns">6ê°œ</span></div>
          <div class="stats-item"><span>ê°­</span><span id="stat-gap">10px</span></div>
          <div class="stats-item"><span>ëª¨ë“ˆ</span><span id="stat-modules">0ê°œ</span></div>
        </div>
        <label class="control-label">ì»¬ëŸ¼ ìˆ˜</label>
        <input type="number" id="columns" class="control-input" min="1" max="12" value="6">
        <label class="control-label" style="margin-top: 12px">ê°­ í¬ê¸° (px)</label>
        <input type="number" id="gap" class="control-input" min="0" max="50" value="10">
        
        <label class="control-label" style="margin-top: 12px">ìº”ë²„ìŠ¤ ë°°ìœ¨</label>
        <div style="display: flex; align-items: center; gap: 10px;">
          <input type="range" id="canvas-scale" class="control-input" min="25" max="150" value="100" style="flex-grow: 1; padding: 0;">
          <span id="scale-readout" style="font-size: 0.9em; width: 45px; text-align: right;">100%</span>
        </div>
        </div>

      <div class="control-group">
        <h3>â• ì»¤ìŠ¤í…€ ëª¨ë“ˆ ì¶”ê°€</h3>
        <label class="control-label">ëª¨ë“ˆ íƒ€ì…</label>
        <select id="custom-type" class="control-select" style="margin-bottom: 8px;">
          <option value="box" selected>Box (ìƒ‰ìƒ)</option>
          <option value="text">Text (í…ìŠ¤íŠ¸)</option>
          <option value="image">Image (ì´ë¯¸ì§€)</option>
        </select>
        <div class="input-group">
          <input type="number" id="custom-col" class="control-input" placeholder="ì»¬ëŸ¼" min="1" value="2">
          <input type="number" id="custom-row" class="control-input" placeholder="ë¡œìš°" min="1" value="2">
        </div>
        <label class="control-label" style="margin-top: 8px">ë°°ê²½ìƒ‰ (Box íƒ€ì… ì „ìš©)</label>
        <input type="color" id="custom-color" class="control-input" value="#8c6c3c" style="height: 40px; cursor: pointer;">
        <div style="display: flex; align-items: center; gap: 5px; margin-top: 5px;">
          <input type="checkbox" id="custom-transparent" onchange="toggleColorPicker('custom', this.checked)">
          <label for="custom-transparent" style="font-size: 0.85em;">ë°°ê²½ íˆ¬ëª…</label>
        </div>
        <label class="control-label" style="margin-top: 12px">ìœ¤ê³½ì„  ìƒ‰</label>
        <input type="color" id="custom-border-color" class="control-input" value="#000000" style="height: 40px; cursor: pointer;">
        <label class="control-label" style="margin-top: 12px">ìœ¤ê³½ì„  ë‘ê»˜ (px)</label>
        <input type="number" id="custom-border-width" class="control-input" value="0" min="0" max="20">
        <button class="btn btn-primary" onclick="addCustomModule()" style="margin-top: 12px">ëª¨ë“ˆ ì¶”ê°€</button>
      </div>

      <div class="control-group" id="edit-panel" style="display: none;">
        <h3>âœï¸ ëª¨ë“ˆ í¸ì§‘</h3>
        <label class="control-label">ëª¨ë“ˆ íƒ€ì…</label>
        <select id="edit-type" class="control-select" style="margin-bottom: 12px;">
          <option value="box">Box (ìƒ‰ìƒ)</option>
          <option value="text">Text (í…ìŠ¤íŠ¸)</option>
          <option value="image">Image (ì´ë¯¸ì§€)</option>
        </select>
        <label class="control-label">Group ID (ê·¸ë£¹í™”)</label>
        <input type="text" id="edit-group-id" class="control-input" placeholder="ì˜ˆ: header-group">

        <label class="control-label" style="margin-top: 12px">ë°ìŠ¤í¬í†± ì»¬ëŸ¼ span</label>
        <input type="number" id="edit-col" class="control-input" min="1" max="12">
        <label class="control-label" style="margin-top: 12px">ë°ìŠ¤í¬í†± ë¡œìš° span</label>
        <input type="number" id="edit-row" class="control-input" min="1" max="10">
        <label class="control-label" style="margin-top: 12px">ëª¨ë°”ì¼ ì»¬ëŸ¼ span (ì„ íƒ)</label>
        <input type="number" id="edit-mobile-col" class="control-input" min="1" max="12" placeholder="ë¹„ì›Œë‘ë©´ ìë™">
        <div class="hint-text" id="mobile-span-hint">ìë™: ë¹„ìœ¨ ê³„ì‚°</div>
        <label class="control-label" style="margin-top: 12px">ë°°ê²½ìƒ‰ (Box íƒ€ì… ì „ìš©)</label>
        <input type="color" id="edit-color" class="control-input" style="height: 40px; cursor: pointer;">
        <div style="display: flex; align-items: center; gap: 5px; margin-top: 5px;">
          <input type="checkbox" id="edit-transparent" onchange="toggleColorPicker('edit', this.checked)">
          <label for="edit-transparent" style="font-size: 0.85em;">ë°°ê²½ íˆ¬ëª…</label>
        </div>
        <label class="control-label" style="margin-top: 12px">ìœ¤ê³½ì„  ìƒ‰</label>
        <input type="color" id="edit-border-color" class="control-input" style="height: 40px; cursor: pointer;">
        <label class="control-label" style="margin-top: 12px">ìœ¤ê³½ì„  ë‘ê»˜ (px)</label>
        <input type="number" id="edit-border-width" class="control-input" value="0" min="0" max="20">
        <button class="btn btn-secondary" style="margin-top: 12px" onclick="deleteSelected()">ğŸ—‘ï¸ ì„ íƒ ëª¨ë“ˆ ì‚­ì œ</button>
      </div>

      <div class="control-group">
        <h3>ğŸ“± ëª¨ë°”ì¼ ë°˜ì‘í˜• ëª¨ë“œ</h3>
        <label class="control-label">ëª¨ë°”ì¼ ëª©í‘œ ì»¬ëŸ¼ ìˆ˜</label>
        <input type="number" id="target-columns" class="control-input" min="1" max="12" value="2">
        <div class="lock-toggle">
          <input type="checkbox" id="mobile-order-lock" onchange="toggleMobileOrderLock(event)">
          <label for="mobile-order-lock">ğŸ”’ ëª¨ë°”ì¼ ìˆœì„œ ë™ê¸°í™”</label>
        </div>
        <label class="control-label" style="margin-top: 12px">ë³€í™˜ ëª¨ë“œ</label>
        <div class="mode-selector">
          <div class="mode-option selected" onclick="selectMode('reflow')" data-mode="reflow">
            <div class="mode-option-title">ğŸ”„ ë¦¬í”Œë¡œìš°</div>
            <div class="mode-option-desc">ìˆœì„œëŒ€ë¡œ ì¬ë°°ì¹˜</div>
          </div>
          <div class="mode-option" onclick="selectMode('center')" data-mode="center" style="opacity: 0.5; cursor: not-allowed;">
            <div class="mode-option-title">â¬…ï¸â¡ï¸ ì¤‘ì•™ ìœ ì§€ (ë¹„í™œì„±)</div>
            <div class="mode-option-desc">ì–‘ë ê· ë“± ì œê±°</div>
          </div>
        </div>
        <div class="mode-hint" id="mode-hint">6ì—´ â†’ 2ì—´ë¡œ ë¦¬í”Œë¡œìš°</div>
      </div>

      <div class="control-group">
        <h3>ğŸ”§ ë„êµ¬</h3>
        <div class="btn-group">
          <button class="btn btn-secondary" id="undo-btn" onclick="undo()" disabled>â†©ï¸ ì‹¤í–‰ ì·¨ì†Œ</button>
          <button class="btn btn-secondary" id="redo-btn" onclick="redo()" disabled>â†ªï¸ ë‹¤ì‹œ ì‹¤í–‰</button>
        </div>
        <button class="btn btn-secondary" onclick="clearAll()" style="background: #fee2e2; color: #dc2626; margin-top: 8px;">ğŸ—‘ï¸ ì „ì²´ ì‚­ì œ</button>
      </div>
    </div>

    <div class="canvas" id="canvas" onclick="handleCanvasClick(event)">
      <div class="grid-container" id="grid"></div>
    </div>

    <div class="panel">
      <h3>ğŸ’» ìƒì„±ëœ ì½”ë“œ</h3>
      <div class="code-tabs">
        <button class="code-tab active" onclick="switchTab('html', event)">HTML</button>
        <button class="code-tab" onclick="switchTab('css', event)">CSS</button>
      </div>
      <div class="code-display" id="code-display"></div>
      <button class="btn btn-primary" style="margin-top: 12px" onclick="copyCode()">ğŸ“‹ í´ë¦½ë³´ë“œì— ë³µì‚¬</button>
    </div>
  </div>
</div>

<div id="toast" class="toast" style="display: none;"></div>

<script>
let modules = [];
let desktopColumns = 6, desktopGap = 10;
let targetColumns = 2, mobileGap = 10;
let responsiveMode = 'reflow';
let currentView = 'desktop', selectedModule = null, activeTab = 'html', draggedIndex = null;
let desktopOrder = [], mobileOrder = [];
let mobileOrderLocked = false;

// --- [ì‹ ê·œ] íˆìŠ¤í† ë¦¬(Undo/Redo) ë³€ìˆ˜ ---
let history = [];
let historyIndex = -1;

// --- [ì‹ ê·œ] ìƒíƒœ ë³µì‚¬ìš© í—¬í¼ ---
function deepCopy(obj) {
  return JSON.parse(JSON.stringify(obj));
}

// --- [ì‹ ê·œ] ìƒíƒœ ì €ì¥ ---
function saveState() {
  // í˜„ì¬ íˆìŠ¤í† ë¦¬ ì¸ë±ìŠ¤ ë’¤ì˜ ë¯¸ë˜ ìƒíƒœ(redo ìŠ¤íƒ)ë¥¼ ëª¨ë‘ ì œê±°
  if (historyIndex < history.length - 1) {
    history.splice(historyIndex + 1);
  }
  
  // í˜„ì¬ ìƒíƒœë¥¼ ê¹Šì€ ë³µì‚¬(deep copy)í•˜ì—¬ ì €ì¥
  const state = {
    modules: deepCopy(modules),
    desktopOrder: [...desktopOrder],
    mobileOrder: [...mobileOrder],
    selectedModuleId: selectedModule !== null ? modules[selectedModule].id : null
  };
  
  history.push(state);
  historyIndex = history.length - 1;
  
  // íˆìŠ¤í† ë¦¬ ìŠ¤íƒì´ ë„ˆë¬´ ì»¤ì§€ëŠ” ê²ƒì„ ë°©ì§€ (ì˜ˆ: 100ë‹¨ê³„)
  if (history.length > 100) {
    history.shift();
    historyIndex--;
  }
  
  updateUndoRedoButtons();
}

// --- [ì‹ ê·œ] ìƒíƒœ ë¶ˆëŸ¬ì˜¤ê¸° ---
function loadState(state) {
  if (!state) return;
  
  modules = deepCopy(state.modules);
  desktopOrder = [...state.desktopOrder];
  mobileOrder = [...state.mobileOrder];
  
  if (state.selectedModuleId !== null) {
    selectedModule = modules.findIndex(m => m.id === state.selectedModuleId);
    if (selectedModule === -1) selectedModule = null; // IDë¥¼ ëª»ì°¾ìœ¼ë©´ ì„ íƒ í•´ì œ
  } else {
    selectedModule = null;
  }
  
  render();
  updateEditPanel(); // í¸ì§‘ íŒ¨ë„ ìƒíƒœ ë™ê¸°í™”
  updateUndoRedoButtons();
}

// --- [ì‹ ê·œ] Undo/Redo í•¨ìˆ˜ ---
function undo() {
  if (historyIndex > 0) {
    historyIndex--;
    loadState(history[historyIndex]);
  }
}

function redo() {
  if (historyIndex < history.length - 1) {
    historyIndex++;
    loadState(history[historyIndex]);
  }
}

// --- [ì‹ ê·œ] Undo/Redo ë²„íŠ¼ í™œì„±/ë¹„í™œì„± ---
function updateUndoRedoButtons() {
  document.getElementById('undo-btn').disabled = (historyIndex <= 0);
  document.getElementById('redo-btn').disabled = (historyIndex >= history.length - 1);
}

function toggleColorPicker(prefix, isTransparent) {
  const colorInput = document.getElementById(prefix + '-color');
  colorInput.disabled = isTransparent;
  colorInput.style.opacity = isTransparent ? 0.5 : 1;
  if (prefix === 'edit' && selectedModule !== null) {
    const m = modules[selectedModule];
    if (m.transparent !== isTransparent) {
        m.transparent = isTransparent;
        render();
        saveState(); // [íˆìŠ¤í† ë¦¬] ìƒíƒœ ì €ì¥
    }
  }
}

function calculateMobileSpan(desktopCol, desktopCols, targetCols) {
  const ratio = desktopCol / desktopCols;
  const calculated = Math.round(ratio * targetCols);
  return Math.max(1, Math.min(calculated, targetCols));
}

function getMobileSpan(module) {
  const clampedTarget = Math.min(module.mobileCol, targetColumns);
  if(module.mobileCol !== undefined && module.mobileCol !== null && module.mobileCol !== '') {
    return Math.max(1, clampedTarget);
  }
  return calculateMobileSpan(module.col, desktopColumns, targetColumns);
}

function switchView(view) {
  currentView = view;
  document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('active'));
  document.querySelector(`.view-btn[onclick="switchView('${view}')"]`).classList.add('active');
  document.getElementById('canvas').classList.toggle('mobile-view', view === 'mobile');
  deselectModule(); // ë·° ì „í™˜ ì‹œ ì„ íƒ í•´ì œ (íˆìŠ¤í† ë¦¬ ì €ì¥ ì—†ìŒ)
  render();
}

function selectMode(mode) {
  if (mode !== 'reflow') {
    showToast('ì´ ëª¨ë“œëŠ” í˜„ì¬ ì•„í‚¤í…ì²˜ì—ì„œ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    return;
  }
  responsiveMode = mode;
  document.querySelectorAll('.mode-option').forEach(opt => opt.classList.remove('selected'));
  document.querySelector(`[data-mode="${mode}"]`).classList.add('selected');
  updateModeHint();
  updateCode();
  showToast(getModeLabel(mode) + ' ëª¨ë“œ');
  // ë·° ëª¨ë“œ ë³€ê²½ì€ íˆìŠ¤í† ë¦¬ ì €ì¥ ì•ˆí•¨
}

function getModeLabel(mode) {
  return {'reflow':'ë¦¬í”Œë¡œìš°','center':'ì¤‘ì•™ ìœ ì§€','left':'ì™¼ìª½ ìœ ì§€','right':'ì˜¤ë¥¸ìª½ ìœ ì§€','custom':'ì»¤ìŠ¤í…€'}[mode];
}

function updateModeHint() {
  const hint = document.getElementById('mode-hint');
  hint.textContent = `${desktopColumns}ì—´ â†’ ${targetColumns}ì—´ë¡œ ë¦¬í”Œë¡œìš°`;
}

function updateMobileSpanHint() {
  if(selectedModule === null) return;
  const m = modules[selectedModule];
  const auto = calculateMobileSpan(m.col, desktopColumns, targetColumns);
  const hint = document.getElementById('mobile-span-hint');
  hint.textContent = `ìë™: ${auto}ì—´ (${m.col}/${desktopColumns} Ã— ${targetColumns})`;
}

function clamp(value, min, max) {
  return Math.max(min, Math.min(value, max));
}

function toggleMobileOrderLock(event) {
  mobileOrderLocked = event.target.checked;
  if (mobileOrderLocked) {
    mobileOrder = [...desktopOrder];
    showToast('ëª¨ë°”ì¼ ìˆœì„œê°€ ë°ìŠ¤í¬í†±ì— ë™ê¸°í™”ë©ë‹ˆë‹¤.');
    render();
    saveState(); // [íˆìŠ¤í† ë¦¬] ìƒíƒœ ì €ì¥
  } else {
    showToast('ëª¨ë°”ì¼ ìˆœì„œ ë™ê¸°í™” í•´ì œ');
  }
}

function init() {
  document.getElementById('columns').addEventListener('input', e => { 
    desktopColumns = clamp(parseInt(e.target.value) || 1, 1, 12);
    updateStats(); updateModeHint(); updateMobileSpanHint(); render(); 
    // íˆìŠ¤í† ë¦¬ ì €ì¥ì€ input ì´ë²¤íŠ¸ê°€ ëë‚  ë•Œ(change) í•˜ëŠ” ê²ƒì´ ì¢‹ìœ¼ë‚˜,
    // í¸ì˜ë¥¼ ìœ„í•´ ì—¬ê¸°ì„œëŠ” ë¦¬ìŠ¤ë„ˆ ë§ˆì§€ë§‰ì— saveState()ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
  });
  // [íˆìŠ¤í† ë¦¬] input ëŒ€ì‹  change ì´ë²¤íŠ¸ë¡œ ì €ì¥
  document.getElementById('columns').addEventListener('change', e => { saveState(); });

  document.getElementById('gap').addEventListener('input', e => { 
    desktopGap = clamp(parseInt(e.target.value) || 0, 0, 50);
    updateStats(); render(); 
  });
  document.getElementById('gap').addEventListener('change', e => { saveState(); });

  document.getElementById('target-columns').addEventListener('input', e => { 
    targetColumns = clamp(parseInt(e.target.value) || 1, 1, 12); 
    updateModeHint(); updateMobileSpanHint(); updateCode(); render();
  });
  document.getElementById('target-columns').addEventListener('change', e => { saveState(); });
  
  document.getElementById('canvas-scale').addEventListener('input', e => {
    const scaleValue = parseInt(e.target.value);
    document.getElementById('canvas').style.transform = `scale(${scaleValue / 100})`;
    document.getElementById('scale-readout').textContent = `${scaleValue}%`;
  });

  // --- ëª¨ë“ˆ í¸ì§‘ ë¦¬ìŠ¤ë„ˆ (ëª¨ë‘ 'change' ì´ë²¤íŠ¸ì— saveState() ì¶”ê°€) ---
  
  // [ì‹ ê·œ] ëª¨ë“ˆ íƒ€ì… í¸ì§‘
  document.getElementById('edit-type').addEventListener('change', e => {
    if (selectedModule !== null) {
        modules[selectedModule].type = e.target.value;
        render();
        saveState();
    }
  });

  // [ì‹ ê·œ] ê·¸ë£¹ ID í¸ì§‘
  document.getElementById('edit-group-id').addEventListener('change', e => {
    if (selectedModule !== null) {
        modules[selectedModule].groupId = e.target.value.trim() || null;
        render();
        saveState();
    }
  });

  document.getElementById('edit-col').addEventListener('input', e => { 
    if(selectedModule!==null) { 
      const maxCol = desktopColumns;
      modules[selectedModule].col = clamp(parseInt(e.target.value)||1, 1, maxCol);
      e.target.value = modules[selectedModule].col; 
      updateMobileSpanHint();
      render(); 
    }
  });
  document.getElementById('edit-col').addEventListener('change', e => { if(selectedModule!==null) saveState(); });

  document.getElementById('edit-row').addEventListener('input', e => { 
    if(selectedModule!==null) { 
      modules[selectedModule].row = clamp(parseInt(e.target.value)||1, 1, 99);
      e.target.value = modules[selectedModule].row;
      render(); 
    }});
  document.getElementById('edit-row').addEventListener('change', e => { if(selectedModule!==null) saveState(); });

  document.getElementById('edit-mobile-col').addEventListener('input', e => { 
    if(selectedModule!==null) { 
      const val = e.target.value;
      if (val === '') {
        modules[selectedModule].mobileCol = null;
      } else {
        const maxCol = targetColumns;
        modules[selectedModule].mobileCol = clamp(parseInt(val)||1, 1, maxCol);
        e.target.value = modules[selectedModule].mobileCol;
      }
      render(); 
    }
  });
  document.getElementById('edit-mobile-col').addEventListener('change', e => { if(selectedModule!==null) saveState(); });

  document.getElementById('edit-color').addEventListener('input', e => { 
      if(selectedModule!==null) { modules[selectedModule].color = e.target.value; render(); }
  });
  document.getElementById('edit-color').addEventListener('change', e => { if(selectedModule!==null) saveState(); });

  document.getElementById('edit-border-color').addEventListener('input', e => { 
    if(selectedModule!==null) { modules[selectedModule].borderColor = e.target.value; render(); }
  });
  document.getElementById('edit-border-color').addEventListener('change', e => { if(selectedModule!==null) saveState(); });

  document.getElementById('edit-border-width').addEventListener('input', e => { 
    if(selectedModule!==null) { 
      modules[selectedModule].borderWidth = clamp(parseInt(e.target.value) || 0, 0, 20);
      e.target.value = modules[selectedModule].borderWidth;
      render(); 
    }
  });
  document.getElementById('edit-border-width').addEventListener('change', e => { if(selectedModule!==null) saveState(); });

  updateStats(); 
  updateModeHint(); 
  render();
  saveState(); // [íˆìŠ¤í† ë¦¬] ì´ˆê¸° ìƒíƒœ ì €ì¥
}

function addCustomModule() {
  const col = clamp(parseInt(document.getElementById('custom-col').value) || 2, 1, desktopColumns);
  const row = clamp(parseInt(document.getElementById('custom-row').value) || 2, 1, 99);
  const color = document.getElementById('custom-color').value;
  const transparent = document.getElementById('custom-transparent').checked;
  const borderColor = document.getElementById('custom-border-color').value;
  const borderWidth = clamp(parseInt(document.getElementById('custom-border-width').value) || 0, 0, 20);
  const type = document.getElementById('custom-type').value; // [ì‹ ê·œ] íƒ€ì…
  
  const newModule = { 
    col, row, color, transparent, borderColor, borderWidth, 
    mobileCol: null, id: Date.now(),
    type: type, // [ì‹ ê·œ] íƒ€ì… ì €ì¥
    groupId: null // [ì‹ ê·œ] ê·¸ë£¹ ID
  };
  
  modules.push(newModule);
  desktopOrder.push(newModule.id);
  
  if (mobileOrderLocked) {
    mobileOrder.push(newModule.id);
  } else {
    mobileOrder.push(newModule.id);
  }
  
  document.getElementById('custom-transparent').checked = false;
  toggleColorPicker('custom', false);
  document.getElementById('custom-border-width').value = 0;

  showToast(`${col}Ã—${row} ${type} ëª¨ë“ˆ ì¶”ê°€`);
  render();
  saveState(); // [íˆìŠ¤í† ë¦¬] ìƒíƒœ ì €ì¥
}

// --- [ìˆ˜ì •] í¸ì§‘ íŒ¨ë„ ì—…ë°ì´íŠ¸ ë¡œì§ ë¶„ë¦¬ ---
function updateEditPanel() {
  if (selectedModule === null) {
    document.getElementById('edit-panel').style.display = 'none';
    return;
  }
  
  const m = modules[selectedModule];
  if (!m) { // ëª¨ë“ˆì´ ì—†ëŠ” ê²½ìš° (Undo ë“±ìœ¼ë¡œ ì¸í•´)
    document.getElementById('edit-panel').style.display = 'none';
    return;
  }
  
  document.getElementById('edit-panel').style.display = 'block';
  
  document.getElementById('edit-type').value = m.type || 'box'; // [ì‹ ê·œ] íƒ€ì…
  document.getElementById('edit-group-id').value = m.groupId || ''; // [ì‹ ê·œ] ê·¸ë£¹ ID
  
  document.getElementById('edit-col').value = clamp(m.col, 1, desktopColumns);
  document.getElementById('edit-col').max = desktopColumns;
  document.getElementById('edit-row').value = m.row;
  document.getElementById('edit-mobile-col').value = m.mobileCol !== null ? clamp(m.mobileCol, 1, targetColumns) : '';
  document.getElementById('edit-mobile-col').max = targetColumns;
  
  document.getElementById('edit-color').value = m.color || '#8c6c3c';
  const isTransparent = m.transparent || false;
  document.getElementById('edit-transparent').checked = isTransparent;
  toggleColorPicker('edit', isTransparent);
  
  document.getElementById('edit-border-color').value = m.borderColor || '#000000';
  document.getElementById('edit-border-width').value = m.borderWidth || 0;
  
  updateMobileSpanHint();
}

function selectModule(index) {
  if (selectedModule === index) return; // ì´ë¯¸ ì„ íƒë¨
  selectedModule = index;
  updateEditPanel(); // í¸ì§‘ íŒ¨ë„ ì—…ë°ì´íŠ¸
  render(); // ì„ íƒ ìƒíƒœ(.selected) ê°±ì‹ 
  // ì„ íƒ ë³€ê²½ì€ íˆìŠ¤í† ë¦¬ ì €ì¥ ì•ˆí•¨
}

function handleCanvasClick(event) {
  if (event.target.id === 'canvas' || event.target.id === 'grid') {
    deselectModule();
  }
}

function deselectModule() {
  if (selectedModule !== null) {
    selectedModule = null;
    updateEditPanel(); // í¸ì§‘ íŒ¨ë„ ìˆ¨ê¸°ê¸°
    render();
    // ì„ íƒ í•´ì œëŠ” íˆìŠ¤í† ë¦¬ ì €ì¥ ì•ˆí•¨
  }
}

function deleteSelected() {
  if(selectedModule !== null) {
    deleteModule(selectedModule, new Event('click')); 
  }
}

function deleteModule(index, event) {
  event.stopPropagation();
  const idToDelete = modules[index].id;
  
  // [ì‹ ê·œ] ê·¸ë£¹ IDê°€ ìˆë‹¤ë©´, ê°™ì€ ê·¸ë£¹ ëª¨ë“ˆë„ í•¨ê»˜ ì‚­ì œí• ì§€ ë¬¼ì–´ë³¼ ìˆ˜ ìˆìŒ
  // (ì—¬ê¸°ì„œëŠ” ì¼ë‹¨ ë‹¨ì¼ ì‚­ì œë§Œ êµ¬í˜„)
  
  modules.splice(index, 1);
  desktopOrder = desktopOrder.filter(id => id !== idToDelete);
  mobileOrder = mobileOrder.filter(id => id !== idToDelete);

  if(selectedModule === index) {
    selectedModule = null;
    updateEditPanel();
  } else if(selectedModule > index) {
    selectedModule--;
  }
  render();
  saveState(); // [íˆìŠ¤í† ë¦¬] ìƒíƒœ ì €ì¥
}

function clearAll() {
  if(confirm('ëª¨ë“  ëª¨ë“ˆì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
    modules = [];
    desktopOrder = [];
    mobileOrder = [];
    selectedModule = null;
    updateEditPanel();
    showToast('ì „ì²´ ì‚­ì œ');
    render();
    saveState(); // [íˆìŠ¤í† ë¦¬] ìƒíƒœ ì €ì¥
  }
}

function handleDragStart(index, event) {
  draggedIndex = index;
  event.target.closest('.module').classList.add('dragging');
  event.dataTransfer.effectAllowed = 'move';
  // ë“œë˜ê·¸í•˜ëŠ” ëª¨ë“ˆì˜ IDë¥¼ ì €ì¥ (ê·¸ë£¹ ë“œë˜ê·¸ë¥¼ ìœ„í•´)
  const order = currentView === 'desktop' ? desktopOrder : mobileOrder;
  event.dataTransfer.setData('text/plain', order[index]);
}

function handleDragEnd(event) {
  document.querySelectorAll('.module.dragging').forEach(el => el.classList.remove('dragging'));
  draggedIndex = null;
}

function handleDragOver(event) {
  event.preventDefault();
  event.dataTransfer.dropEffect = 'move';
}

// --- [ìˆ˜ì •] ê·¸ë£¹ ë“œë˜ê·¸ë¥¼ ì§€ì›í•˜ë„ë¡ handleDrop ìˆ˜ì • ---
function handleDrop(index, event) {
  event.preventDefault();
  event.stopPropagation();
  
  if(draggedIndex !== null && draggedIndex !== index) {
    const order = currentView === 'desktop' ? desktopOrder : mobileOrder;
    const draggedId = parseInt(event.dataTransfer.getData('text/plain'));
    const draggedModule = modules.find(m => m.id === draggedId);
    
    if (!draggedModule) { // ë“œë˜ê·¸ëœ ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŒ
        draggedIndex = null;
        return;
    }

    const groupId = draggedModule.groupId;
    let idsToMove = [];
    
    if (groupId) {
        // [ê·¸ë£¹ ë“œë˜ê·¸]
        // í˜„ì¬ ìˆœì„œ(order)ì—ì„œ ë™ì¼ ê·¸ë£¹ IDë¥¼ ê°€ì§„ ëª¨ë“ˆ IDë“¤ì„ ìˆœì„œëŒ€ë¡œ ì¶”ì¶œ
        idsToMove = order.filter(id => {
            const m = modules.find(mod => mod.id === id);
            return m && m.groupId === groupId;
        });
    } else {
        // [ë‹¨ì¼ ë“œë˜ê·¸]
        idsToMove.push(draggedId);
    }
    
    // ë“œë¡­ ëŒ€ìƒ(target)ì´ ë“œë˜ê·¸í•˜ëŠ” ê·¸ë£¹ì˜ ì¼ë¶€ì¸ì§€ í™•ì¸
    const targetId = order[index];
    if (idsToMove.includes(targetId)) {
        draggedIndex = null;
        return; // ìê¸° ìì‹  ë˜ëŠ” ê·¸ë£¹ ë™ë£Œì—ê²Œ ë“œë¡­í•œ ê²½ìš° ë¬´ì‹œ
    }

    // 1. í˜„ì¬ ìˆœì„œ(order)ì—ì„œ ì´ë™í•  IDë“¤(idsToMove)ì„ ì œê±°
    let newOrder = order.filter(id => !idsToMove.includes(id));
    
    // 2. ì œê±°ëœ ìƒˆ ìˆœì„œ(newOrder)ì—ì„œ ë“œë¡­ ëŒ€ìƒ(targetId)ì˜ ìƒˆ ì¸ë±ìŠ¤ë¥¼ ì°¾ìŒ
    let newDropIndex = newOrder.indexOf(targetId);
    
    // 3. ë“œë¡­ ëŒ€ìƒì˜ ì¸ë±ìŠ¤ì— ì´ë™í•  IDë“¤(idsToMove)ì„ ì‚½ì…
    newOrder.splice(newDropIndex, 0, ...idsToMove);

    // 4. ìƒˆ ìˆœì„œë¥¼ í˜„ì¬ ë·°ì— ì ìš©
    if (currentView === 'desktop') {
      desktopOrder = newOrder;
      if (mobileOrderLocked) {
        mobileOrder = [...desktopOrder];
      }
    } else {
      mobileOrder = newOrder;
    }
    
    if (selectedModule !== null) {
        const selectedId = modules[selectedModule].id;
        // ì„ íƒëœ ëª¨ë“ˆì˜ ì‹¤ì œ ì¸ë±ìŠ¤ê°€ ë³€ê²½ë˜ì—ˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ID ê¸°ì¤€ìœ¼ë¡œ ë‹¤ì‹œ ì°¾ìŒ
        const actualIndex = modules.findIndex(m => m.id === selectedId);
        selectedModule = actualIndex;
    }
    
    render();
    saveState(); // [íˆìŠ¤í† ë¦¬] ìƒíƒœ ì €ì¥
  }
  draggedIndex = null;
}

function getOrderedModules() {
  const order = currentView === 'desktop' ? desktopOrder : mobileOrder;
  // [ìˆ˜ì •] modules ë°°ì—´ì—ì„œ IDë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” ê²½ìš°(Undo/Redo ë“±ìœ¼ë¡œ)ë¥¼ ëŒ€ë¹„í•´ filter(m => m) ì¶”ê°€
  return order.map(id => modules.find(m => m.id === id)).filter(m => m);
}

function updateStats() {
  document.getElementById('stat-columns').textContent = `${desktopColumns}ê°œ`;
  document.getElementById('stat-gap').textContent = `${desktopGap}px`;
  document.getElementById('stat-modules').textContent = `${modules.length}ê°œ`;
}

// --- [ìˆ˜ì •] ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ê¸°ëŠ¥ ì¶”ê°€ ---
function render() {
  const grid = document.getElementById('grid');
  const columns = currentView === 'desktop' ? desktopColumns : targetColumns;
  const gap = currentView === 'desktop' ? desktopGap : mobileGap;
  grid.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
  grid.style.gap = `${gap}px`;
  
  const orderedModules = getOrderedModules();
  
  grid.innerHTML = orderedModules.map((m, i) => {
    // mì€ ìˆœì„œê°€ ì ìš©ëœ ëª¨ë“ˆ (getOrderedModules() ê²°ê³¼)
    // ì‹¤ì œ ëª¨ë“ˆ ë°ì´í„°(type ë“±)ë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ modules ë°°ì—´ì—ì„œ ë‹¤ì‹œ ì°¾ìŒ
    const actualIndex = modules.findIndex(mod => mod.id === m.id);
    if (actualIndex === -1) return ''; // ëª¨ë“ˆì´ ì—†ìœ¼ë©´ ë Œë”ë§ ìŠ¤í‚µ
    
    const moduleData = modules[actualIndex]; // ì‹¤ì œ ì›ë³¸ ë°ì´í„°
    
    const isTransparent = moduleData.transparent || false;
    const bgColor = isTransparent ? 'transparent' : (moduleData.color || '#8c6c3c');
    const borderWidth = moduleData.borderWidth || 0;
    const borderColor = moduleData.borderColor || '#000000';
    const outlineStyle = borderWidth > 0 ? `outline: ${borderWidth}px solid ${borderColor}; outline-offset: -${borderWidth}px;` : '';
    
    const desktopColSpan = clamp(moduleData.col, 1, desktopColumns);
    const mobileColSpan = getMobileSpan(moduleData);
    const col = currentView === 'desktop' ? desktopColSpan : mobileColSpan;
    
    const showWarning = currentView === 'mobile' && 
                        moduleData.col > targetColumns && 
                        (moduleData.mobileCol === null || moduleData.mobileCol === undefined || moduleData.mobileCol === '');
    
    // [ì‹ ê·œ] íƒ€ì…ë³„ ë‚´ë¶€ HTML ìƒì„±
    let innerHTML = '';
    const moduleType = moduleData.type || 'box';
    if (moduleType === 'text') {
        innerHTML = `<p class="module-content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed non risus.</p>`;
    } else if (moduleType === 'image') {
        innerHTML = `<img src="https://via.placeholder.com/${desktopColSpan * 100}x${moduleData.row * 50}" alt="placeholder" class="module-content image">`;
    }
    
    return `
    <div class="module ${selectedModule === actualIndex ? 'selected' : ''} ${showWarning ? 'warning' : ''}" 
         style="grid-column: span ${col}; grid-row: span ${moduleData.row}; background: ${moduleType === 'box' ? bgColor : ''}; ${outlineStyle}"
         data-type="${moduleType}"
         data-group-id="${moduleData.groupId || ''}"
         onclick="selectModule(${actualIndex})"
         ondragover="handleDragOver(event)"
         ondrop="handleDrop(${i}, event)">
      ${innerHTML} 
      <div class="module-info">${moduleData.col}Ã—${moduleData.row}</div>
      ${showWarning ? '<div class="module-warning">!</div>' : ''}
      <button class="module-delete" onclick="deleteModule(${actualIndex}, event)">Ã—</button>
      <div class="module-drag-handle" 
           draggable="true" 
           ondragstart="handleDragStart(${i}, event)" 
           ondragend="handleDragEnd(event)">â ¿</div>
    </div>
  `}).join('');
  
  updateStats(); 
  updateCode();
}

// --- [ìˆ˜ì •] ìƒì„±ëœ ì½”ë“œì— íƒ€ì…/ê·¸ë£¹ ë°˜ì˜ ---
function generateHTML() {
  return `<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="grid-container">
${desktopOrder.map((id, i) => {
    const m = modules.find(mod => mod.id === id);
    if (!m) return '';
    const groupClass = m.groupId ? ` group-${m.groupId}` : '';
    // [ìˆ˜ì •] íƒ€ì…ê³¼ ê·¸ë£¹ í´ë˜ìŠ¤ ì¶”ê°€
    return `    <div class="module module-${i + 1} type-${m.type || 'box'}${groupClass}">
${m.type === 'text' ? '      <p>Lorem ipsum...</p>' : (m.type === 'image' ? '      <img src="https://via.placeholder.com/150" alt="placeholder">' : '      ')}
    </div>`;
  }).join('\n')}
  </div>
</body>
</html>`;
}

function generateCSS() {
  let css = `body {
  margin: 0;
  background: whitesmoke;
  padding: ${desktopGap}px;
}

.grid-container {
  display: grid;
  grid-template-columns: repeat(${desktopColumns}, 1fr);
  gap: ${desktopGap}px;
}

.module {
  min-height: 60px;
}

/* [ì‹ ê·œ] íƒ€ì…ë³„ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.module.type-image {
  background: #e0e0e0;
}
.module.type-image img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}
.module.type-text {
  background: #ffffff;
  padding: 10px;
}

${desktopOrder.map((id, i) => {
  const m = modules.find(mod => mod.id === id);
  if (!m) return '';
  const desktopColSpan = clamp(m.col, 1, desktopColumns);
  
  const isTransparent = m.transparent || false;
  const bgColor = isTransparent ? 'transparent' : (m.color || '#8c6c3c');
  const borderWidth = m.borderWidth || 0;
  const borderColor = m.borderColor || '#000000';
  const outlineStyle = borderWidth > 0 ? `\n  outline: ${borderWidth}px solid ${borderColor};\n  outline-offset: -${borderWidth}px;` : '';
  
  // [ìˆ˜ì •] Box íƒ€ì…ì¼ ë•Œë§Œ ë°°ê²½ìƒ‰ ì ìš©
  const backgroundStyle = (m.type === 'box' || !m.type) ? `background: ${bgColor};` : '';

  return `.module-${i + 1} {
  grid-column: span ${desktopColSpan};
  grid-row: span ${m.row};
  ${backgroundStyle}${outlineStyle}
}`;
}).join('\n\n')}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• - ${getModeLabel(responsiveMode)} */
@media (max-width: 768px) {
  body { padding: ${mobileGap}px; }
  .grid-container {
    grid-template-columns: repeat(${targetColumns}, 1fr);
    gap: ${mobileGap}px;
  }
  
`;

  if(responsiveMode === 'reflow') {
      css += mobileOrder.map((id, i) => {
      const m = modules.find(mod => mod.id === id);
      if (!m) return '';
      const moduleClassIndex = desktopOrder.indexOf(id) + 1;
      if (moduleClassIndex === 0) return ''; 

      const mobileSpan = getMobileSpan(m);
      const comment = m.mobileCol !== null ? ' /* ìˆ˜ë™ ì„¤ì • */' : ` /* ìë™: ${m.col}/${desktopColumns} Ã— ${targetColumns} = ${mobileSpan} */`;
      
      return `  .module-${moduleClassIndex} {
    grid-column: span ${mobileSpan};${comment}
    grid-row: span ${m.row};
    order: ${i};
  }`;
    }).join('\n\n');
  } 

  css += '\n}';
  return css;
}

function updateCode() {
  document.getElementById('code-display').textContent = activeTab === 'html' ? generateHTML() : generateCSS();
}

function switchTab(tab, event) {
  activeTab = tab;
  document.querySelectorAll('.code-tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  updateCode();
}

function copyCode() {
  navigator.clipboard.writeText(activeTab === 'html' ? generateHTML() : generateCSS());
  showToast(`${activeTab.toUpperCase()} ì½”ë“œ ë³µì‚¬ë¨!`);
}

function showToast(message) {
  const toast = document.getElementById('toast');
  toast.textContent = message;
  toast.style.display = 'block';
  setTimeout(() => toast.style.display = 'none', 3000);
}

window.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
